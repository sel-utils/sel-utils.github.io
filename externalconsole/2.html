<!--
 + This file was automatically generated by sel-utils and
 + released under the GNU General Public License version 3.
 + 
 + License: https://github.com/sel-project/sel-utils/blob/master/LICENSE
 + Repository: https://github.com/sel-project/sel-utils
 +-->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>External Console 2 | SEL Utils</title>
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<meta name="theme-color" content="#1E2327" />
		<meta name="description" content="Protocol used to communicate with external sources using a raw TCP protocol or Web Sockets." />
		<link rel="icon" type="image/png" href="../favicon.png" />
		<link rel="canonical" href="https://sel-project.github.io/sel-utils/externalconsole/2.html" />
		<link rel="stylesheet" href="../style.min.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" />
		<script src="https://apis.google.com/js/platform.js" async defer></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
		<script src="https://platform.twitter.com/widgets.js"></script>
	</head>
	<body>
		<div class="nav"><a href="../">Index</a>  <a href="https://github.com/sel-project/sel-utils/blob/master/README.md">About</a>    <a href="https://github.com/sel-project/sel-utils/blob/master/TYPES.md">Types</a>    <a href="https://github.com/sel-project/sel-utils/blob/master/CONTRIBUTING.md">Contribute</a>    <a href="https://github.com/sel-project/sel-utils/blob/master/xml/protocol/externalconsole2.xml">XML</a>    <a href="https://github.com/sel-project/sel-utils">Github</a></div></div>
</div>
		<div class="logo" onclick="if(document.body.classList.contains('dark')){document.body.classList.remove('dark');}else{document.body.classList.add('dark');}"></div>
		<h1>External Console 2</h1>
		<a href="https://twitter.com/__selproject" class="twitter-follow-button" data-lang="en" data-show-count="true">Follow @__selproject</a>
		<div style="height:4px"></div>
		<div class="g-plusone" data-size="medium"></div>
		<p><strong>Jump to</strong>: <a href="#encoding">Encoding</a>, <a href="#packets">Packets</a>, <a href="#types">Types</a></p>
		<p><strong>Released</strong>: February 7th, 2017</p>
		<p>Protocol used to communicate with external sources using a raw TCP protocol or <a href="https://en.wikipedia.org/wiki/WebSocket" target="_blank">Web Sockets</a>.</p>
		<h2>Features</h2>
		<ul>
			<li>Organised remote logs</li>
			<li>Execution of remote commands (if the server allows it)</li>
			<li>Authentication using password hashing (optional)</li>
			<li>Server's resources usage</li>
			<li>Support for the hub-node layout</li>
		</ul>
		<h2>What's new from protocol 1</h2>
		<ul>
			<li>TCP packet are prefixed with their length</li>
			<li>Command can know when they generate output</li>
		</ul>
		<h2>Connecting</h2>
		<h3>Using raw TCP sockets</h3>
		<p>The raw TCP protocol, also referred as "classic", uses a packet-oriented TCP connection, prefixing every packet with its length encoded as a little-endian unsigned 16-bits integer.</p>
		<p>The connection starts with the client sending the string <code>classic</code> encoded as UTF-8 to the server, which replies with an <a href="#login_auth-credentials">AuthCredentials</a> packet and waits for the client to authenticate.</p>
		<h3>Using Web Sockets</h3>
		<p>The websocket protocol uses json packets instead of binary ones (with the keys in snake case) and encodes the arrays of bytes (<a href="#login_auth-credentials_payload">AuthCredentials.payload</a> and <a href="#login_auth_hash">Auth.hash</a>) into strings using base64. The connection is established like every web socket connection and, if successfull, continues with the <a href="#login_auth-credentials">AuthCredentials</a> packet sent by the server.</p>
		<p>Example of a connection in javascript:</p>
		<pre>
			<code class="javascript">var socket = new WebSocket("example.com:19134");
socket.onmessage = function(event){
   var json = JSON.parse(event.data);
   if(json.hash) console.log("The server requires hash " + json.hash_algorithm);
   else console.log("The server doesn't require hashing");
}
</code>
		</pre>
		<h2>Authenticating</h2>
		<p>After receiving the <a href="#login_auth-credentials">AuthCredentials</a> packet, the external console, if able to perform authentication, has to send the password or its hash through the <a href="#login_auth">Auth</a> packet and waits for a response, given by the <a href="#login_welcome">Welcome</a> packet. If the server accepts the external console the status in the packet will be "accepted", the additional fields of the <a href="#login.welcome.accepted" target="_blank">Welcome.Accepted</a> packet can be read and the external console can proceed keeping the connection alive, sending commands, receiving logs and other updates.</p>
		<h2>Keeping the connection alive</h2>
		<p>The server may disconnect the external console after a period of inactivity (which shouldn't be shorter than 8 seconds). For this reason the external console needs to send a <a href="#status_keep-alive">KeepAlive</a> packet to notify the server that it is still perfectly connected.</p>
		<h2>Server's logs</h2>
		<p>Every time a log is created on the server it sends a <a href="#connected_console-message">ConsoleMessage</a> to the external console that contains informations about when the log was generated, from whom was generated and the log itself.</p>
		<h2>Executing commands</h2>
		<p>If the <a href="#login_welcome_accepted_remote-command">remoteCommand</a> field in the <a href="#login_welcome.accepted" target="_blank">Welcome.Accepted</a> packet is true, the server allows the execution of commands from the external console. That's done using the <a href="#connected_command">Command</a> packet, which has only one field that is the raw command.</p>
		<hr>
		<h2 id="encoding">Encoding</h2>
		<p><strong>Endianness</strong>:</p>
		<table>
			<tr>
				<td>big endian</td>
				<td>ushort, int, uint, ulong, float</td>
			</tr>
			<tr>
				<td>little endian</td>
				<td></td>
			</tr>
		</table>
		<p><strong>Ids</strong>: ubyte</p>
		<p><strong>Array's length</strong>: ushort</p>
		<hr>
		<h2 id="packets">Packets</h2>
		<table>
			<tr>
				<th>Section</th>
				<th>Packets</th>
			</tr>
			<tr>
				<td><a href="#login">Login</a></td>
				<td class="center">3</td>
			</tr>
			<tr>
				<td><a href="#status">Status</a></td>
				<td class="center">4</td>
			</tr>
			<tr>
				<td><a href="#connected">Connected</a></td>
				<td class="center">3</td>
			</tr>
		</table>
		<h3 id="login">Login</h3>
		<p>Packets used during the authentication process and to exhange the initial server's informations.</p>
		<table>
			<tr>
				<th>Packets</th>
				<th>Id</th>
				<th>Clientbound</th>
				<th>Serverbound</th>
			</tr>
			<tr>
				<td><a href="#login_auth-credentials">Auth Credentials</a></td>
				<td class="center">0</td>
				<td class="center">✓</td>
				<td class="center"></td>
			</tr>
			<tr>
				<td><a href="#login_auth">Auth</a></td>
				<td class="center">1</td>
				<td class="center"></td>
				<td class="center">✓</td>
			</tr>
			<tr>
				<td><a href="#login_welcome">Welcome</a></td>
				<td class="center">2</td>
				<td class="center">✓</td>
				<td class="center"></td>
			</tr>
		</table>
		<ul>
			<li>
				<h3 id="login_auth-credentials">Auth Credentials</h3>
				<div class="desc">
					<p><strong>Id</strong>: 0</p>
					<p><strong>Hex</strong>: 00</p>
					<p><strong>Bin</strong>: 00000000</p>
					<p>Sent by the <strong>server</strong></p>
				</div>
				<p>First packet sent by the server when the connection is successfully established. It contains informations about how the external console shall authenticate itself.</p>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>When</th>
					</tr>
					<tr>
						<td><a href="#login_auth-credentials_protocol">protocol</a></td>
						<td>ubyte</td>
						<td class="center"></td>
					</tr>
					<tr>
						<td><a href="#login_auth-credentials_hash">hash</a></td>
						<td>bool</td>
						<td class="center"></td>
					</tr>
					<tr>
						<td><a href="#login_auth-credentials_hash-algorithm">hash algorithm</a></td>
						<td>string</td>
						<td class="center"><code>hash</code> is <code><span style="color:#009688">true</span></code></td>
					</tr>
					<tr>
						<td><a href="#login_auth-credentials_payload">payload</a></td>
						<td>ubyte[]</td>
						<td class="center"><code>hash</code> is <code><span style="color:#009688">true</span></code></td>
					</tr>
				</table>
				<ul>
					<li>
						<strong id="login_auth-credentials_protocol">protocol</strong>
						<p>Protocol used by the server. If the client uses a different one it should close the connection without trying to perform authentication.</p>
					</li>
					<li>
						<strong id="login_auth-credentials_hash">hash</strong>
						<p>Whether to perform hashing on the password or not.</p>
					</li>
					<li>
						<strong id="login_auth-credentials_hash-algorithm">hash algorithm</strong>
						<p>Algorithm used by the server to hash the concatenation of the password and the <a href="#login_auth-credentials_payload">payload</a>. The value should be sent in lower case without any separation symbol (for example <code>md5</code> instead of <code>MD5</code>, <code>sha256</code> instead of <code>SHA-256</code>).</p>
						<p>See <a href="#login_auth_hash">Auth.hash</a> for more details.</p>
					</li>
					<li>
						<strong id="login_auth-credentials_payload">payload</strong>
						<p>Payload to cancatenate to the password before hashing it, as described in the <a href="#login.auth.hash" target="_blank">Auth.hash</a>'s field description.</p>
					</li>
				</ul>
			</li>
			<li>
				<h3 id="login_auth">Auth</h3>
				<div class="desc">
					<p><strong>Id</strong>: 1</p>
					<p><strong>Hex</strong>: 01</p>
					<p><strong>Bin</strong>: 00000001</p>
					<p>Sent by the <strong>client</strong></p>
				</div>
				<p>Performs authentication following the instruncions given by the <a href="#login_auth-credentials">AuthCredentials</a> packet.</p>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
					</tr>
					<tr>
						<td><a href="#login_auth_hash">hash</a></td>
						<td>ubyte[]</td>
					</tr>
				</table>
				<ul>
					<li>
						<strong id="login_auth_hash">hash</strong>
						<p>Pasword encoded as UTF-8 if <a href="#login.auth_credentials_auth" target="_blank">AuthCredentials.hash</a> is <code>false</code> or the hash (specified in <a href="#login_auth-credentials_hash-algorithm">AuthCredentials.hashAlgorithm</a>) of the password encoded as UTF-8 concatenated with the bytes from <a href="#login_auth-credentials_payload">AuthCredentials.payload</a> if <code>true</code>.</p>
						<p>The hash can be done with a function (if hashAlgorithm is <code>sha1</code>) in D:</p>
						<pre>
							<code class="d">sha1Of(cast(ubyte[])password ~ authCredentials.payload);
</code>
						</pre>
						<p>Or using <code>MessageDigest</code> in Java:</p>
						<pre>
							<code class="java">MessageDigest md = MessageDigest.getInstance(authCredentials.hashAlgorithm);
md.update(password.getBytes(StandardCharsets.UTF_8));
md.update(authCredentials.payload);
byte[] hash = md.digest();
</code>
						</pre>
					</li>
				</ul>
			</li>
			<li>
				<h3 id="login_welcome">Welcome</h3>
				<div class="desc">
					<p><strong>Id</strong>: 2</p>
					<p><strong>Hex</strong>: 02</p>
					<p><strong>Bin</strong>: 00000010</p>
					<p>Sent by the <strong>server</strong></p>
				</div>
				<p>Indicates the status of the authentication process.</p>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
					</tr>
					<tr>
						<td>status</td>
						<td>ubyte</td>
					</tr>
				</table>
				<p><strong>Variants</strong>:</p>
				<table>
					<tr>
						<th>Variant</th>
						<th>Field</th>
						<th>Value</th>
					</tr>
					<tr>
						<td><a href="#login_welcome_accepted">Accepted</a></td>
						<td>status</td>
						<td class="center">0</td>
					</tr>
					<tr>
						<td><a href="#login_welcome_wrong-hash">Wrong Hash</a></td>
						<td>status</td>
						<td class="center">1</td>
					</tr>
					<tr>
						<td><a href="#login_welcome_timed-out">Timed Out</a></td>
						<td>status</td>
						<td class="center">2</td>
					</tr>
				</table>
				<ul>
					<li>
						<h3 id="login_welcome_accepted">Accepted</h3>
						<p>Sent when the hash sent in <a href="#login_auth">Auth</a> matches the server's.</p>
						<p><strong>Additional Fields</strong>:</p>
						<table>
							<tr>
								<th>Name</th>
								<th>Type</th>
							</tr>
							<tr>
								<td><a href="#login_welcome_accepted_remote-commands">remote commands</a></td>
								<td>bool</td>
							</tr>
							<tr>
								<td><a href="#login_welcome_accepted_software">software</a></td>
								<td>string</td>
							</tr>
							<tr>
								<td><a href="#login_welcome_accepted_versions">versions</a></td>
								<td>ubyte[3]</td>
							</tr>
							<tr>
								<td><a href="#login_welcome_accepted_display-name">display name</a></td>
								<td>string</td>
							</tr>
							<tr>
								<td><a href="#login_welcome_accepted_games">games</a></td>
								<td><a href="#types_game">game</a>[]</td>
							</tr>
							<tr>
								<td><a href="#login_welcome_accepted_connected-nodes">connected nodes</a></td>
								<td>string[]</td>
							</tr>
						</table>
						<ul>
							<li>
								<strong id="login_welcome_accepted_remote-commands">remote commands</strong>
								<p>Indicates whether the external console can execute command remotely through the <a href="#connected_command">Command</a> packet.</p>
							</li>
							<li>
								<strong id="login_welcome_accepted_software">software</strong>
								<p>The server's software as a formatted string (without the version).</p>
							</li>
							<li>
								<strong id="login_welcome_accepted_versions">versions</strong>
								<p>Versions of the server in a 3-btyes array readed as <code>[major, minor, release]</code>.</p>
							</li>
							<li>
								<strong id="login_welcome_accepted_display-name">display name</strong>
								<p>Name of the server (not the game's MOTD!). It shouldn't contain Minecraft formatting codes.</p>
							</li>
							<li>
								<strong id="login_welcome_accepted_games">games</strong>
								<p>Informations about the games and their protocols supported by the server.</p>
							</li>
							<li>
								<strong id="login_welcome_accepted_connected-nodes">connected nodes</strong>
								<p>List of names of the nodes connected to the server, if it uses the hub-node layout, or an empty list.</p>
							</li>
						</ul>
					</li>
					<li>
						<h3 id="login_welcome_wrong-hash">Wrong Hash</h3>
						<p>Sent when <a href="#login_auth">Auth</a> is received but the given password or hash doesn't match the server's one.</p>
					</li>
					<li>
						<h3 id="login_welcome_timed-out">Timed Out</h3>
						<p>Sent when <a href="#login_auth">Auth</a> is not received and the server decides to close the connection because too much time has elapsed since the creation of the socket.</p>
					</li>
				</ul>
			</li>
		</ul>
		<h3 id="status">Status</h3>
		<p>Packets about the informations and the usage of the server.</p>
		<table>
			<tr>
				<th>Packets</th>
				<th>Id</th>
				<th>Clientbound</th>
				<th>Serverbound</th>
			</tr>
			<tr>
				<td><a href="#status_keep-alive">Keep Alive</a></td>
				<td class="center">0</td>
				<td class="center">✓</td>
				<td class="center">✓</td>
			</tr>
			<tr>
				<td><a href="#status_update-nodes">Update Nodes</a></td>
				<td class="center">1</td>
				<td class="center">✓</td>
				<td class="center"></td>
			</tr>
			<tr>
				<td><a href="#status_request-stats">Request Stats</a></td>
				<td class="center">2</td>
				<td class="center"></td>
				<td class="center">✓</td>
			</tr>
			<tr>
				<td><a href="#status_update-stats">Update Stats</a></td>
				<td class="center">3</td>
				<td class="center">✓</td>
				<td class="center"></td>
			</tr>
		</table>
		<ul>
			<li>
				<h3 id="status_keep-alive">Keep Alive</h3>
				<div class="desc">
					<p><strong>Id</strong>: 0</p>
					<p><strong>Hex</strong>: 00</p>
					<p><strong>Bin</strong>: 00000000</p>
					<p>Sent by the <strong>server</strong> and the <strong>client</strong></p>
				</div>
				<p>Keeps the connection alive and/or calculates the latency. This packet should be sent at least every 5 seconds to avoid the disconnection caused by timeout and update the latency. The external console can send this packet whenever it wants it and the server must reply with the same packet with the same field's value.</p>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
					</tr>
					<tr>
						<td><a href="#status_keep-alive_count">count</a></td>
						<td>uint</td>
					</tr>
				</table>
				<ul>
					<li>
						<strong id="status_keep-alive_count">count</strong>
						<p>An identifier chosen by the external console to uniquely identify the packet.</p>
					</li>
				</ul>
			</li>
			<li>
				<h3 id="status_update-nodes">Update Nodes</h3>
				<div class="desc">
					<p><strong>Id</strong>: 1</p>
					<p><strong>Hex</strong>: 01</p>
					<p><strong>Bin</strong>: 00000001</p>
					<p>Sent by the <strong>server</strong></p>
				</div>
				<p>Updates the list of the nodes connected to the hub, adding or removing one.</p>
				<p>If the server isn't built on the hub-node layout this packet is never sent.</p>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
					</tr>
					<tr>
						<td><a href="#status_update-nodes_action">action</a></td>
						<td>ubyte</td>
					</tr>
					<tr>
						<td><a href="#status_update-nodes_node">node</a></td>
						<td>string</td>
					</tr>
				</table>
				<ul>
					<li>
						<strong id="status_update-nodes_action">action</strong>
						<p>Whether the node should be added or removed from the list of connected nodes.</p>
						<p><strong>Constants</strong>:</p>
						<table>
							<tr><th>Name</th><th>Value</th></tr>
							<tr>
								<td id="status_update-nodes_action_add">add</td>
								<td class="center">0</td>
							</tr>
							<tr>
								<td id="status_update-nodes_action_remove">remove</td>
								<td class="center">1</td>
							</tr>
						</table>
					</li>
					<li>
						<strong id="status_update-nodes_node">node</strong>
						<p>Name of the node.</p>
					</li>
				</ul>
			</li>
			<li>
				<h3 id="status_request-stats">Request Stats</h3>
				<div class="desc">
					<p><strong>Id</strong>: 2</p>
					<p><strong>Hex</strong>: 02</p>
					<p><strong>Bin</strong>: 00000010</p>
					<p>Sent by the <strong>client</strong></p>
				</div>
				<p>Requests an <a href="#stats_update-stats">UpdateStats</a> packet to the server, which should sent it immediately instead of waiting for the next automatic update (if the server does one).</p>
			</li>
			<li>
				<h3 id="status_update-stats">Update Stats</h3>
				<div class="desc">
					<p><strong>Id</strong>: 3</p>
					<p><strong>Hex</strong>: 03</p>
					<p><strong>Bin</strong>: 00000011</p>
					<p>Sent by the <strong>server</strong></p>
				</div>
				<p>Updates the statistics about the usage of the server and, eventually, the connected nodes.</p>
				<p>This packet is sent in response to <a href="#status_request-stats">RequestStats</a> and every time the server retains that the stats should be updated (usually in a range of 5 to 30 seconds).</p>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
					</tr>
					<tr>
						<td><a href="#status_update-stats_online-players">online players</a></td>
						<td>uint</td>
					</tr>
					<tr>
						<td><a href="#status_update-stats_max-players">max players</a></td>
						<td>int</td>
					</tr>
					<tr>
						<td><a href="#status_update-stats_uptime">uptime</a></td>
						<td>uint</td>
					</tr>
					<tr>
						<td><a href="#status_update-stats_upload">upload</a></td>
						<td>uint</td>
					</tr>
					<tr>
						<td><a href="#status_update-stats_download">download</a></td>
						<td>uint</td>
					</tr>
					<tr>
						<td><a href="#status_update-stats_nodes">nodes</a></td>
						<td><a href="#types_node-stats">nodeStats</a>[]</td>
					</tr>
				</table>
				<ul>
					<li>
						<strong id="status_update-stats_online-players">online players</strong>
						<p>Number of players currently online on the server. Players that are performing authentication are not included in the count.</p>
					</li>
					<li>
						<strong id="status_update-stats_max-players">max players</strong>
						<p>Highest number of players that can join the server simultaneously. If -1, there is not maximum number of players.</p>
					</li>
					<li>
						<strong id="status_update-stats_uptime">uptime</strong>
						<p>Milliseconds since the server has started.</p>
					</li>
					<li>
						<strong id="status_update-stats_upload">upload</strong>
						<p>Average amount of bytes sent every second.</p>
					</li>
					<li>
						<strong id="status_update-stats_download">download</strong>
						<p>Average amount of bytes sent every second.</p>
					</li>
					<li>
						<strong id="status_update-stats_nodes">nodes</strong>
						<p>Resources usage of the connected nodes, if the server uses the hub-node layout, or an empty list.</p>
					</li>
				</ul>
			</li>
		</ul>
		<h3 id="connected">Connected</h3>
		<p>Packets regarding the server's console and commands.</p>
		<table>
			<tr>
				<th>Packets</th>
				<th>Id</th>
				<th>Clientbound</th>
				<th>Serverbound</th>
			</tr>
			<tr>
				<td><a href="#connected_console-message">Console Message</a></td>
				<td class="center">4</td>
				<td class="center">✓</td>
				<td class="center"></td>
			</tr>
			<tr>
				<td><a href="#connected_command">Command</a></td>
				<td class="center">5</td>
				<td class="center"></td>
				<td class="center">✓</td>
			</tr>
			<tr>
				<td><a href="#connected_permission-denied">Permission Denied</a></td>
				<td class="center">6</td>
				<td class="center">✓</td>
				<td class="center"></td>
			</tr>
		</table>
		<ul>
			<li>
				<h3 id="connected_console-message">Console Message</h3>
				<div class="desc">
					<p><strong>Id</strong>: 4</p>
					<p><strong>Hex</strong>: 04</p>
					<p><strong>Bin</strong>: 00000100</p>
					<p>Sent by the <strong>server</strong></p>
				</div>
				<p>Logs a message from the server's console. It may be the output of a command, a debug message or any other message that the server retains able to be seen by the External Console.</p>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
					</tr>
					<tr>
						<td><a href="#connected_console-message_node">node</a></td>
						<td>string</td>
					</tr>
					<tr>
						<td><a href="#connected_console-message_timestamp">timestamp</a></td>
						<td>ulong</td>
					</tr>
					<tr>
						<td><a href="#connected_console-message_logger">logger</a></td>
						<td>string</td>
					</tr>
					<tr>
						<td><a href="#connected_console-message_message">message</a></td>
						<td>string</td>
					</tr>
					<tr>
						<td><a href="#connected_console-message_command-id">command id</a></td>
						<td>int</td>
					</tr>
				</table>
				<ul>
					<li>
						<strong id="connected_console-message_node">node</strong>
						<p>Name of the node that created the log or an empty string if the log was created by the hub or by a server that isn't based on the hub-node layout.</p>
					</li>
					<li>
						<strong id="connected_console-message_timestamp">timestamp</strong>
						<p>Unix timestamp in milliseconds that indicates the exact time when the log was generated by the server.</p>
						<p>The logs may not arrive in order when the server uses the hub-node layout or some other kind of proxy because the logs created by the nodes have an additional latency (the one between the hub, or proxy, and the node).</p>
					</li>
					<li>
						<strong id="connected_console-message_logger">logger</strong>
						<p>Name of the logger. It may be the world name if the log was generated by a world's message (like a broadcast or a chat message), the name of plugin (for example <code>plugin\test</code>) or the name of the package/module/class that generated the log (like <code>math.vector</code> or <code>event.world.player</code>).</p>
					</li>
					<li>
						<strong id="connected_console-message_message">message</strong>
						<p>The logged message. It may contain Minecraft's formatting codes which should be translated into appropriate colours and formatting (bold, italic and strikethrough) by the client implementation of the external console.</p>
					</li>
					<li>
						<strong id="connected_console-message_command-id">command id</strong>
						<p>Identifier given in <a href="#connected_command_command-id">Command.commandId</a> if the log was generated by a command sent by the external console or -1 if the log was not related to a command sent from the external console.</p>
					</li>
				</ul>
			</li>
			<li>
				<h3 id="connected_command">Command</h3>
				<div class="desc">
					<p><strong>Id</strong>: 5</p>
					<p><strong>Hex</strong>: 05</p>
					<p><strong>Bin</strong>: 00000101</p>
					<p>Sent by the <strong>client</strong></p>
				</div>
				<p>Executes a command remotely if the server allows it. If not a <a href="#connected_permission-denied" target="_blank">Permission Denied</a> is sent back. A good implementation of the external console client should never send this packet if <a href="#login_welcome_accepted_remote-commands">remoteCommands</a> field in <a href="#login.welcome.accepted" target="_blank">Welcome.Accepted</a> is not true.</p>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
					</tr>
					<tr>
						<td><a href="#connected_command_command">command</a></td>
						<td>string</td>
					</tr>
					<tr>
						<td><a href="#connected_command_command-id">command id</a></td>
						<td>uint</td>
					</tr>
				</table>
				<ul>
					<li>
						<strong id="connected_command_command">command</strong>
						<p>Command to execute on the server.</p>
					</li>
					<li>
						<strong id="connected_command_command-id">command id</strong>
						<p>Identifier for the command that will be sent in <a href="#connected_console-message_command-id">ConsoleMessage.commandId</a> if the command generates an output.</p>
					</li>
				</ul>
			</li>
			<li>
				<h3 id="connected_permission-denied">Permission Denied</h3>
				<div class="desc">
					<p><strong>Id</strong>: 6</p>
					<p><strong>Hex</strong>: 06</p>
					<p><strong>Bin</strong>: 00000110</p>
					<p>Sent by the <strong>server</strong></p>
				</div>
				<p>Bodyless packet only sent in response to <a href="#connected_command">Command</a> when the server doesn't allow the execution of remote commands through the external console. A good implementation of the external console client should never receive this packet avoiding the use of the <a href="#connected_command">Command</a> packet when the <a href="#login_welcome_accepted_remote-command">remoteCommands</a> field is false.</p>
			</li>
		</ul>
		<hr>
		<h2 id="types">Types</h2>
		<ul>
			<li>
				<h3 id="types_game">Game</h3>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
					</tr>
					<tr>
						<td><a href="#types_game_type">type</a></td>
						<td>ubyte</td>
					</tr>
					<tr>
						<td><a href="#types_game_protocols">protocols</a></td>
						<td>uint[]</td>
					</tr>
				</table>
				<ul>
					<li>
						<strong id="types_game_type">type</strong>
						<p>Variant of the game.</p>
						<p><strong>Constants</strong>:</p>
						<table>
							<tr><th>Name</th><th>Value</th><th></th></tr>
							<tr>
								<td id="types_game_type_pocket">pocket</td>
								<td class="center">1</td>
								<td>Minecraft: Pocket Edition and derivated</td>
							</tr>
							<tr>
								<td id="types_game_type_minecraft">minecraft</td>
								<td class="center">2</td>
								<td>Classic minecraft (Java version)</td>
							</tr>
						</table>
					</li>
					<li>
						<strong id="types_game_protocols">protocols</strong>
						<p>List of protocols supported by the server for the indicated game.</p>
					</li>
				</ul>
			</li>
			<li>
				<h3 id="types_node-stats">Node Stats</h3>
				<p>Resources usage of a node.</p>
				<p><strong>Fields</strong>:</p>
				<table>
					<tr>
						<th>Name</th>
						<th>Type</th>
					</tr>
					<tr>
						<td><a href="#types_node-stats_name">name</a></td>
						<td>string</td>
					</tr>
					<tr>
						<td><a href="#types_node-stats_tps">tps</a></td>
						<td>float</td>
					</tr>
					<tr>
						<td><a href="#types_node-stats_ram">ram</a></td>
						<td>ulong</td>
					</tr>
					<tr>
						<td><a href="#types_node-stats_cpu">cpu</a></td>
						<td>float</td>
					</tr>
				</table>
				<ul>
					<li>
						<strong id="types_node-stats_name">name</strong>
						<p>Name of the node. Should match one of the names given in <a href="#login_welcome_accepted_connected-nodes">Welcome.Accepted.connectedNodes</a> or one added using the <a href="#status_update-nodes">UpdateNodes</a> packet.</p>
						<p>If the server isn't built on the hub-node layout the name is an empty string and the following values are for the whole server and not for a node.</p>
					</li>
					<li>
						<strong id="types_node-stats_tps">tps</strong>
						<p>Ticks per second of the node in range 0 to 20. If the value is less than 20, the server is lagging.</p>
					</li>
					<li>
						<strong id="types_node-stats_ram">ram</strong>
						<p>RAM allocated by the node in bytes.</p>
						<p>If the value is 0 the node couldn't retrieve the amount of memory allocated by its process.</p>
					</li>
					<li>
						<strong id="types_node-stats_cpu">cpu</strong>
						<p>Percentage of CPU used by the node. The value can be higher than 100 when the machine where the node is running has more than one CPU.</p>
						<p>If the value is <code>not a number</code> the node couldn't retrieve the amount of CPU used by its process.</p>
					</li>
				</ul>
			</li>
		</ul>
	</body>
</html>
